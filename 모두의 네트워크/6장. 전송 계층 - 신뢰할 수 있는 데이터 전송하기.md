# 6장. 전송 계층 : 신뢰할 수 있는 데이터 전송하기

[23] 전송 계층의 역할

1) 전송 계층의 역할

- 목적지에 신뢰할 수 있는 데이터를 전달
- 오류를 점검하는 기능
- 전송된 데이터의 목적지가 어떤 애플리케이션인지 식별하는 기능

2) 연결형 통신과 비연결형 통신

연결형 통신 - 신뢰할 수 있고 정확하게 데이터를 전송하는 통신 방식

// 신뢰성 / 정확성 / TCP

비연결형 통신 - 신뢰성을 보장하지 않지만 효율적으로 데이터를 전송하는 통신

// 효율성 / UDP

[24] TCP의 구조

1) TCP

세그먼트 = TCP 헤더 + 데이터

*  TCP 헤더

| 1) 출발지 포트 번호 (16비트) | 2) 목적지 포트 번호 (16비트) |
| --- | --- |
| 3) 일련번호 (32비트) | 4) 확인 응답 번호 (32비트) |
| 4) 확인 응답 번호 (32비트) |  |
| 5) 헤더길이(4비트) 6) 예약 영역 (6비트) 7) 코드 비트(6비트) | 8) 윈도우 크기 (16비트) |
| 9) 체크섬 (16비트) | 10) 긴급 포인터 (16비트) |
| 11) 옵션 |  |
- 연결을 확립하기 위해 TCP 헤더에 있는 코드 비트를 사용한다.

SYN - 연결 요청 / ACK - 확인 응답 / FIN - 연결 종료

2) 3-way 핸드셰이크

- 3-way 핸드 셰이크 - 연결 확립을 위해 패킷 교환을 세 번 하는 것

- 연결을 확립할 때는 ‘SYN’과 ‘ACK’를 사용하고, 연결을 종료할 때는 ‘FIN’과 ‘ACK’를 사용한다.

[25] 일련번호와 확인 응답 번호의 구조

1) 일련번호와 확인 응답 번호

- 일련번호는 송신 측에서 수신 측에 ‘이 데이터가 몇 번째 데이터인지’ 알려 주는 역할
- 확인 응답 번호는 수신 측이 몇 번째 데이터를 수신했는 지 송신 측에 알려주는 역할

2) 윈도우 크기

- 포트 번호는 어떤 애플리케이션인지 구분하는 역할을 한다.
- 포트 번호는 0~65535번을 사용한다. 0~1023번은 잘 알려진 포트(well-known ports)라고 하고 1025번 이후는 랜덤 포트라고 한다.

[27] UDP의 구조

1) UDP

2) UDP 헤더

- UDP는 데이터를 효율적이고 빠르게 보낼 때 사용되는 프로토콜이다.
- UDP는 UDP 헤더가 있지만 TCP 헤더에 비해 간단하다.
- UDP 헤더가 있는 데이터를 UDP 데이터그램이라고 한다.
- UDP는 랜에서 불특정 다수에게 브로드캐스트로 데이터를 일괄 전송한다.
  
